{% extends 'index.html' %}
{% block content %}
<div class="dashboard-header">
    <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
    <p>Welcome back, <strong>{{ session.get('user') }}</strong>! Here's your pharmacy overview.</p>
</div>

<div class="card-container">
    <div class="card">
        <h3><i class="fas fa-pills"></i> Total Medicines</h3>
        <div class="value">{{ medicines }}</div>
        <p>Different products in stock</p>
    </div>
    
    <div class="card">
        <h3><i class="fas fa-users"></i> Total Customers</h3>
        <div class="value">{{ customers }}</div>
        <p>Registered customers</p>
    </div>
    
    <div class="card">
        <h3><i class="fas fa-shopping-cart"></i> Today's Purchases</h3>
        <div class="value">{{ today_purchases }}</div>
        <p>Items purchased today</p>
    </div>
    
    <div class="card">
        <h3><i class="fas fa-cash-register"></i> Today's Sales</h3>
        <div class="value">{{ today_sales }}</div>
        <p>Items sold today</p>
    </div>
</div>

<div class="recent-activity">
    <h3><i class="fas fa-history"></i> Recent Activity</h3>
    <div class="activity-grid">
        <div class="activity-card">
            <h4><i class="fas fa-cash-register"></i> Latest Sales</h4>
            <ul class="activity-list">
                {% for sale in recent_sales %}
                <li>
                    <span class="activity-desc">Sale #{{ sale.bill_no }}</span>
                    <span class="activity-amount">{{ sale.total|currency }}</span>
                    <span class="activity-time">{{ sale.date|time_ago }}</span>
                </li>
                {% endfor %}
            </ul>
        </div>
        
        <div class="activity-card">
            <h4><i class="fas fa-exclamation-triangle"></i> Low Stock</h4>
            <ul class="activity-list">
                {% for med in low_stock %}
                <li>
                    <span class="activity-desc">{{ med.name }}</span>
                    <span class="activity-amount badge {% if med.quantity < 5 %}badge-danger{% else %}badge-warning{% endif %}">
                        {{ med.quantity }} left
                    </span>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}